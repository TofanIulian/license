<div class="container">
    <div class="card">
        <form [formGroup]="registerForm" novalidate (ngSubmit)="register(registerForm.value)">
            <h3>Register</h3>
            <div class="input-group"
                [ngClass]="{'invalid': email.invalid && (email.dirty || email.touched), 'valid': email.valid}">
                <label for="email">Email:</label>
                <input type="text" name="email" formControlName="email">
                <div *ngIf="email.invalid && (email.dirty || email.touched)" class="input-error">
                    <div *ngIf="email.errors.required">
                        Email is required.
                    </div>
                    <div *ngIf="email.errors.email">
                        This is not a valid email addres.
                    </div>
                </div>
            </div>

            <div class="input-group"
                [ngClass]="{'invalid': displayName.invalid && (displayName.dirty || displayName.touched), 'valid': displayName.valid}">
                <label for="displayName">Display name:</label>
                <input type="text" name="displayName" formControlName="displayName">
                <div *ngIf="displayName.invalid && (displayName.dirty || displayName.touched)" class="input-error">
                    <div *ngIf="displayName.errors.required">
                        Display name is required.
                    </div>
                    <div *ngIf="displayName.errors.minlength">
                        Display name too short.
                    </div>
                </div>
            </div>

            <div class="input-group"
                [ngClass]="{'invalid': password.invalid && (password.dirty || password.touched), 'valid': password.valid}">
                <label for="password">Password:</label>
                <input type="password" name="password" formControlName="password">
                <div *ngIf="password.invalid && (password.dirty || password.touched)" class="input-error">
                    <div *ngIf="password.errors.required">
                        Password is required.
                    </div>
                    <div *ngIf="password.errors.minlength">
                        Password too short.
                    </div>
                </div>
            </div>

            <div class="input-group"
                [ngClass]="{'invalid': (registerForm.errors?.mismatch || checkPassword.invalid) && (checkPassword.dirty || checkPassword.touched), 'valid': checkPassword.valid && !registerForm.errors?.mismatch}">
                <label for="checkPassword">Re-enter Password:</label>
                <input type="password" name="checkPassword" formControlName="checkPassword">
                <div *ngIf="(registerForm.errors?.mismatch || checkPassword.invalid) && (checkPassword.dirty || checkPassword.touched)"
                    class="input-error">
                    <div *ngIf="checkPassword.errors?.required">
                        Please re-enter password.
                    </div>
                    <div *ngIf="checkPassword.errors?.minlength">
                        Re-entered password too short.
                    </div>
                    <div
                        *ngIf="(!checkPassword.errors?.required && !checkPassword.errors?.minlength) && registerForm.errors?.mismatch">
                        Passwords don't match.
                    </div>
                </div>
            </div>

            <button type="submit" [disabled]="registerForm.invalid">Register</button>
        </form>
        <hr>
        <p class="login">Do you already have an account? <a routerLink="/login">Go to login.</a></p>
    </div>
</div>